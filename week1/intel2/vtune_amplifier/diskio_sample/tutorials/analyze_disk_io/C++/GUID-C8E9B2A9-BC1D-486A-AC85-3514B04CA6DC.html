<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Prepare Your App for Analysis" />
<meta name="DC.Relation" scheme="URI" content="GUID-3B2AF07D-354E-46E1-8D52-1CD085196368.html" />
<meta name="prodname" content="VTune Amplifier" />
<meta name="version" content="2017" />
<meta name="series" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-C8E9B2A9-BC1D-486A-AC85-3514B04CA6DC" />
<meta name="DC.Language" content="en-US" />
<link rel="stylesheet" type="text/css" href="intel_css_styles.css" />
<title>Prepare Your App for Analysis</title>
<script src="resources/prism/prism.js"><!----></script>
<link href="resources/prism/prism.css" rel="stylesheet" />
</head>
<body id="GUID-C8E9B2A9-BC1D-486A-AC85-3514B04CA6DC">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; VTune&#8482; Amplifier 2017</em></p>


<h1 class="topictitle1">Prepare Your App for Analysis</h1>
<div><p id="GUID-F3E66E06-EB9C-4C1C-B3B5-FFF0773E2311"><img height="32" src="GUID-C2B5D55A-E9BE-48F2-BFAA-B91DE7D1BBBF-low.png" width="32" />
		Before you start analyzing your application target for I/O issues, do the
		following: 
	 </p>
<ol id="GUID-FE6021FD-F757-43D8-A2F8-60E2753DBD6C"><li><p><a href="#GET_TOOLS">Get
				software tools.</a></p>
</li>
<li><p><a href="#BUILD_MODE">Build
				your application.</a></p>
</li>
</ol>
<div class="section" id="GET_TOOLS"><h2 class="sectiontitle">Get Software Tools</h2><p>You need the following tools to try the tutorial steps yourself using
		  the 
		  <samp class="codeph">diskio</samp> sample application: 
		</p>
<p><ul id="GUID-2331F98E-DA99-4A5E-841D-CA1D15CBF187"><li><p><span>Intel&reg; VTune&#8482; Amplifier</span>,
				including sample applications 
			 </p>
</li>
<li><p><samp class="codeph">.tgz</samp> file extraction utility 
			 </p>
</li>
<li><p>GNU* compiler 
			 </p>
</li>
</ul>
</p>
<p><strong>Acquire Intel VTune Amplifier 
		  </strong></p>
<p>If you do not already have access to the VTune Amplifier, you can
		  download an evaluation copy from 
		  <a href="HTTP://SOFTWARE.INTEL.COM/EN-US/ARTICLES/INTEL-SOFTWARE-EVALUATION-CENTER/" target="_blank">
			 http://software.intel.com/en-us/articles/intel-software-evaluation-center/</a>.
		  
		</p>
<p><strong>Install and Set Up VTune Amplifier Sample Applications</strong></p>
<p><ol id="GUID-F03D0085-FDF9-4559-B10C-F24541ABA707"><li><p>Copy the 
				<samp class="codeph">diskio_vtune_amp_xe.tgz</samp> file from the 
				<samp class="codeph">&lt;<em>install-dir</em>&gt;/samples/&lt;<em>locale</em>&gt;/C++</samp>
				directory to a writable directory or share on your system. The default
				installation path for the VTune Amplifier XE is 
				<samp class="codeph">opt/intel/vtune_amplifier_xe_<var>&lt;version&gt;</var></samp>;
				for the VTune Amplifier for Systems the default path is: 
			 </p>
<ul id="GUID-DE14D626-59AD-4CEC-8B53-D6C437A999D5"><li><p>For root users: 
					 <samp class="codeph">/opt/intel/system_studio_&lt;version&gt;/vtune_amplifier_for_systems</samp></p>
</li>
<li><p>For non-root users: 
					 <samp class="codeph">$HOME/intel/system_studio_&lt;version&gt;/vtune_amplifier_for_systems</samp></p>
</li>
</ul>
</li>
<li><p>Extract the sample from the tgz file. 
			 </p>
</li>
</ol>
</p>
<div class="Note"><h3 class="NoteTipHead">Note</h3> <p><ul id="GUID-66A2C9B8-8561-4174-8DF4-711CD71BE238"><li><p>Samples are non-deterministic. Your screens may vary from the
				  screen captures shown throughout this tutorial. 
				</p>
</li>
<li><p>Samples are designed only to illustrate the VTune Amplifier
				  features; they do not represent best practices for creating code. 
				</p>
</li>
<li><p>Disk Input and Output analysis is supported for both VTune
				  Amplifier XE and VTune Amplifier for Systems. Steps in this tutorial are
				  applicable to both products but screen shots are made with the VTune Amplifier
				  XE version. 
				</p>
</li>
</ul>
</p>
</div>
</div>
<div class="section" id="BUILD_MODE"><h2 class="sectiontitle">Build Your
		  Application </h2><ol id="GUID-9E1FC280-2192-4513-8797-0FEE56186CE6"><li id="GUID-1274383C-4579-454F-A5DB-6FAC6BC18F90"><p id="GUID-A1454785-F576-400F-B43C-5BAD3B9565ED">Browse to the
				directory where you extracted the sample code (for example, 
				<span class="filepath" id="GUID-A2BE163A-A52F-41CE-8A6D-C69FC1378D5B">/home/samples/diskio</span>).
				
			 </p>
</li>
<li id="GUID-315D2B27-4CD7-4ACB-8288-A15A5AE30DBF"><p id="GUID-E8673B85-3C4A-444D-80B6-6550692AAAD0">Run the<samp class="codeph">
				  Makefile</samp> to build the application: 
			 </p>
<p id="GUID-F8085570-4064-4025-A79B-BF4F273B5A9B"><pre>$ make</pre></p>
<p>The application is built with the g++ compiler with all
				optimizations turned on: 
			 </p>
<p><samp class="codeph">$ g++ diskio.cpp -O3 -lrt</samp></p>
</li>
<li id="GUID-8A1E1E52-FD63-4EEB-BC71-EB0B1381F9DD"><p id="GUID-3E955BC3-6EB1-46D3-9B79-B0152CDDD6CB">Run the application
				to create a performance baseline: 
			 </p>
<p id="GUID-166F1E44-92D5-4FEE-A3E3-C1817F7BED59"><samp class="codeph" id="GUID-2F6EAA33-85A9-44A3-A245-0FD5E2D0CA89">$ time
				  ./diskio -f &lt;<em>outputfile</em>&gt; -m &lt;c|b|s|a&gt;</samp></p>
<p id="GUID-6F64BC6C-5DAE-4581-BE84-E51B00588EB1">where 
				<samp class="codeph">&lt;<em>outputfile</em>&gt;</samp> is an output file with
				the records created by the 
				<samp class="codeph">diskio</samp> application; the 
				<samp class="codeph">-m</samp> option supports the following operation modes
				for the output file: 
			 </p>
<ul id="GUID-4CB34B22-FD6B-4E79-BAC2-745115A85BAB"><li><p><samp class="codeph">c</samp> writes data (16 bytes) asynchronously to
					 the output file using the system file cache; 
				  </p>
</li>
<li><p><samp class="codeph">b</samp> writes data (16 bytes) to the user buffer
					 (1024 records) and then writes the buffer to a file using the system file
					 cache; 
				  </p>
</li>
<li><p><samp class="codeph">s</samp> writes data (16 bytes) synchronously to the
					 user buffer (1024 records) and writes the buffer directly to the I/O device
					 without using the system file cache; 
				  </p>
</li>
<li><p><samp class="codeph">a</samp> writes data (16 bytes) to the user buffers
					 and asynchronously submits them to the disk. 
				  </p>
</li>
</ul>
<p>For example, run the application in the system cache mode: 
			 </p>
<pre>$ time ./diskio -f out.txt -m c 

real    0m36.403s
user    0m4.859s
sys     0m30.771s</pre><p>36.403 seconds is your performance baseline. You can later compare
				this application execution time with the execution time after proposed
				optimizations. 
			 </p>
</li>
</ol>
</div>
<div class="section" id="GUID-B1F5248E-63DC-49E5-9702-6FB5905EE19E"><h2 class="sectiontitle">Recap</h2><p id="GUID-CC8D4D8B-F6E0-4561-90FE-C6290631290F">You built the target in
		  the release mode with all optimizations turned on and created a performance
		  baseline that could be used further to identify performance improvements. Your
		  application is ready for analysis. 
		</p>
</div>
<div class="section" id="GUID-0E9774BC-BB5C-47B8-93AB-E0313688996D"><h2 class="sectiontitle">Next Step</h2><p><a href="GUID-E0B22255-231F-441D-A780-7DF1B4890751.html">Configure and Run Disk
			 Input/Output Analysis</a></p>
</div>
</div>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-3B2AF07D-354E-46E1-8D52-1CD085196368.html">Analyzing Disk Input and Output Waits</a></div>
</div>
<div></div>
</body>
</html>
